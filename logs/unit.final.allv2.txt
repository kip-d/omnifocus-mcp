
 RUN  v3.2.4 /Users/kip/codex/omnifocus-mcp

 ✓ tests/unit/tools/base.test.ts (30 tests) 66ms
 ✓ tests/unit/tools/export.test.ts (32 tests) 33ms
 ✓ tests/unit/timezone.test.ts (31 tests) 189ms
 ✓ tests/unit/tools/analytics.test.ts (30 tests) 69ms
 ✓ tests/unit/tools/tasks/QueryTasksToolV2.test.ts (36 tests) 95ms
 ✓ tests/unit/tools/task-crud.test.ts (30 tests) 53ms
 ✓ tests/unit/code-changes-verification.test.ts (5 tests) 82ms
 ✓ tests/unit/tools/analytics/workflow-analysis-tool.test.ts (4 tests) 12ms
 ✓ tests/unit/utils/response-format-utilities.test.ts (34 tests) 20ms
 ❯ tests/unit/tools/system-v2.test.ts (8 tests | 1 failed) 53ms
   ✓ SystemToolV2 > version operation > should return version information 3ms
   ✓ SystemToolV2 > version operation > should handle version info errors 1ms
   ✓ SystemToolV2 > diagnostics operation > should run basic diagnostics 1ms
   ✓ SystemToolV2 > diagnostics operation > should run diagnostics with custom test script 37ms
   ✓ SystemToolV2 > diagnostics operation > should handle failed diagnostic tests 1ms
   ✓ SystemToolV2 > diagnostics operation > should handle complete diagnostic failure 1ms
   × SystemToolV2 > invalid operation > should return error for invalid operation 8ms
     → createErrorResponse is not defined
   ✓ SystemToolV2 > tool metadata > should have correct name and description 1ms
 ✓ tests/unit/tools/projects/ProjectsToolV2.test.ts (30 tests) 54ms
 ✓ tests/unit/tools/project-crud.test.ts (14 tests) 25ms
 ✓ tests/unit/tools/list-projects-tool.test.ts (9 tests) 59ms
 ✓ tests/unit/response-format-consistency.test.ts (11 tests) 89ms
 ✓ tests/unit/cache-manager.test.ts (28 tests) 47ms
 ✓ tests/unit/tag-operations.test.ts (4 tests) 5ms
 ✓ tests/unit/tools/tasks/manage-task-tool.test.ts (6 tests) 112ms
 ✓ tests/unit/tools/recurring.test.ts (14 tests) 58ms
 ✓ tests/unit/tools/list-tasks-tool.test.ts (7 tests) 17ms
 ✓ tests/unit/omnifocus/plugins/gaming-recurring-analyzer.test.ts (4 tests) 6ms
 ✓ tests/unit/type-adapters.test.ts (13 tests) 28ms
 ✓ tests/unit/omnifocus/scripts/ScriptBuilder.test.ts (29 tests) 11ms
 ✓ tests/unit/tools/folders.test.ts (21 tests) 83ms
 ✓ tests/unit/tools/index-tools-registration.test.ts (1 test) 44ms
 ✓ tests/unit/tools/tags-v2.test.ts (13 tests) 100ms
 ✓ tests/unit/completed-project-tasks.test.ts (11 tests) 12ms
 ✓ tests/unit/utils/schema-validation.test.ts (35 tests) 12ms
 ✓ tests/unit/omnifocus/OmniAutomation.test.ts (24 tests) 23ms
 ✓ tests/unit/tools/analytics/pattern-analysis-v2.test.ts (3 tests) 69ms
 ✓ tests/unit/omnifocus/RobustOmniAutomation.test.ts (14 tests) 16ms
 ✓ tests/unit/tools/export-bulk.test.ts (11 tests) 77ms
 ✓ tests/unit/tools/perspectives-v2.test.ts (8 tests) 82ms
 ✓ tests/unit/tools/reviews/manage-reviews.test.ts (6 tests) 83ms
 ✓ tests/unit/tools/export/export-tool.test.ts (5 tests) 10ms
 ✓ tests/unit/tools/schemas/project-schemas.test.ts (8 tests) 13ms
 ✓ tests/unit/omnifocus/scripts/bridge-template.test.ts (33 tests) 12ms
 ✓ tests/unit/tools/tasks/query-tasks-smart-suggest.test.ts (3 tests) 50ms
 ✓ tests/unit/tools/tasks/query-tasks-upcoming.test.ts (3 tests) 16ms
 ✓ tests/unit/tools/folders/folders-consolidated.test.ts (10 tests) 18ms
 ✓ tests/unit/performance-optimizations.test.ts (15 tests) 16ms
stdout | tests/unit/tag-conversion.test.ts > Tag Type Conversion Issues > should check for array/object conversion patterns in tag scripts
\nAnalyzing LIST_TAGS_SCRIPT for type conversion issues:
  Found 1 instances of pattern 5: \.map\(
\nAnalyzing MANAGE_TAGS_SCRIPT for type conversion issues:
  Found 2 instances of pattern 1: \.push\([^)]+\)(?!;)
  Found 1 instances of pattern 2: \.addTags\(\[
  Found 1 instances of pattern 3: \.removeTags\(\[
  Found 1 instances of pattern 5: \.map\(

stdout | tests/unit/tag-conversion.test.ts > Tag Type Conversion Issues > should identify complex object serialization
\nFound complex serialization patterns:
  LIST_TAGS: 27 instances
  MANAGE_TAGS: 26 instances
\nFound complex serialization patterns:
  LIST_TAGS: 1 instances

 ✓ tests/unit/tag-conversion.test.ts (3 tests) 6ms
 ✓ tests/unit/omnifocus/scripts/script-builder.test.ts (23 tests) 9ms
 ✓ tests/unit/omnifocus/plugins/core-recurring-analyzer.test.ts (5 tests) 7ms
 ✓ tests/unit/utils/permissions.test.ts (6 tests) 10ms
 ✓ tests/unit/utils/logger.test.ts (3 tests) 7ms
 ✓ tests/unit/task-search-limit.test.ts (3 tests) 6ms
 ✓ tests/unit/utils/error-messages.test.ts (10 tests) 18ms
 ✓ tests/unit/mcp-client.test.ts (2 tests) 3ms
 ↓ tests/unit/test-data-management.test.ts (6 tests | 6 skipped)
 ↓ tests/unit/integration.test.ts (7 tests | 7 skipped)

 Test Files  1 failed | 47 passed | 2 skipped (50)
      Tests  1 failed | 687 passed | 13 skipped (701)
   Start at  00:45:12
   Duration  5.28s (transform 2.81s, setup 3.83s, collect 7.11s, tests 1.99s, environment 25ms, prepare 9.48s)

